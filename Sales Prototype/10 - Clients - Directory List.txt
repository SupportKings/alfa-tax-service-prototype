<!-- =========================
     COMPANIES - DIRECTORY LIST VIEW
     ========================= -->

<!-- Page Summary for Clients
List Fields:
– full_name
– status_category_id
– client_type_category_id
– quality_category_id
– phone
– language_preference_category_id
– source_category_id

KPIs (prototype):
– Open Tasks: Clients with status = New Lead or Prospect (not yet active)
– Status: Distribution across Active, On Hold, Churned
– Trends: New clients added per month over time
-->

<!-- Process Remarks
Kathy's anchor view — see all 500 clients at a glance. Filter by quality to find difficult clients, by status to find prospects, by language for Spanish-speaking clients. Primary entry point to drill into any client.
-->

<page name="companiesList" layout="DirectoryList" displayName="Clients">

  <kpis>
    <kpi id="companies_open_tasks_1"
         name="Prospects Pending Conversion"
         type="Incomplete Task Count"
         displayType="Single Value"
         axesSummary="none"
         version="PROTOTYPE" />
  </kpis>

  <kpis>
    <kpi id="companies_status_1"
         name="Client Status Breakdown"
         type="Status Value"
         displayType="Single Value"
         axesSummary="none"
         version="PROTOTYPE" />
  </kpis>

  <kpis>
    <kpi id="companies_trend_1"
         name="New Clients Over Time"
         type="Trend"
         displayType="Line Chart"
         axesSummary="Month vs New Client Count"
         version="PROTOTYPE" />
  </kpis>

  <component
    name="companiesList"
    layout="ListView"
    table_id="companies"
    createButton="VISIBLE"
    editType="DETAILS"
  >
    <field id="full_name" displayName="Client Name" displayType="Text" tooltip="Person or business name" />
    <field id="status_category_id" displayName="Status" displayType="SingleSelect" tooltip="Current client relationship status" />
    <field id="client_type_category_id" displayName="Type" displayType="SingleSelect" tooltip="Individual or Business client" />
    <field id="quality_category_id" displayName="Quality" displayType="SingleSelect" tooltip="Internal rating of client responsiveness and ease of work" />
    <field id="phone" displayName="Phone" displayType="Phone" tooltip="Primary contact number" />
    <field id="language_preference_category_id" displayName="Language" displayType="SingleSelect" tooltip="Preferred communication language" />
    <field id="source_category_id" displayName="Source" displayType="SingleSelect" tooltip="How this client found Alfa Tax" />

    <rowSnapshots>
      <snapshot id="companies_row_snapshot_1"
                name="Services & Returns Summary"
                type="Row Snapshot"
                displayType="Row Snapshot"
                show_delta="TRUE"
                delta_window="WoW"
                version="PROTOTYPE" />
    </rowSnapshots>

    <!-- Optional list fields -->
    <!-- <field id="industry_category_id" displayName="Industry" displayType="SingleSelect" tooltip="Client's business industry" /> -->
    <!-- <field id="legal_structure_category_id" displayName="Legal Structure" displayType="SingleSelect" tooltip="Business entity type" /> -->
  </component>
</page>